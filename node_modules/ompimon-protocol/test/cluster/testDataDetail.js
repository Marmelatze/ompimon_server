var
    BufferBuilder = require("buffer-builder"),
    _ = require("underscore"),
    binary = require("binary"),
    Int64 = require('node-int64'),

    cluster = require('ompimon-cluster'),
    protocol = require("../../"),
    protoDataRequest = require('../../cluster_actions/DataDetail'),
    Parser = require("../../parser"),

    stub = require("../../test-stub")

    ;


var client = cluster.client;

client = new client(new Buffer(256));
client.id = "1234567890yyyasdfasdfasdfasdfasd";
client.sendFunctions = ['ibsend', 'bsend'];
client.ranks = [13, 24];

var action = new protoDataRequest();

module.exports = {
    testParse: function (test) {
        var parser = new Parser(stub.buildDataDetail(stub.dataDetail).get());
        var result = action.parse(client, parser);

        test.deepEqual(result, stub.dataDetail);

        test.done();
    }

};
