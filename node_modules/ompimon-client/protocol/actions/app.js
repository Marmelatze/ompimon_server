var Action = require("./action").Action,
    util = require("util"),
    auth = require("ompimon-auth").auth,
    response = require("../response.js")
;


exports.Action = App;

function App() {
    Action.call(this);
}

util.inherits(App, Action);

App.prototype.process = function(socket, data) {
    var self = this;

    auth.authenticate(data.username, data.password, function() {
        self.emit('send', socket, new response.Response('auth', {
            token: socket.id
        }));
    }, function() {
        self.emit('send', socket, new response.Response('auth', {
            error: 'invalid username/password'
        }));
    });
};


