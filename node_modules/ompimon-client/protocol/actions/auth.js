var Action = require("./action").Action,
    util = require("util"),
    auth = require("ompimon-auth").auth,
    response = require("../response.js")
;


exports.Action = Auth;

function Auth() {
    Action.call(this);
}

util.inherits(Auth, Action);

Auth.prototype.process = function(socket, data) {
    var self = this;
    console.log(data);
    auth.authenticate('android', data.username, data.password, function() {
        self.emit('send', socket, new response.Response('auth', {
            token: socket.id
        }));
    }, function() {
        self.emit('send', socket, new response.Response('auth', {
            error: 'invalid username/password'
        }));
    });
};


